import base64
code="aW1wb3J0IHB5bW9uZ28NCmltcG9ydCB1cmxsaWINCmltcG9ydCBodHRwLmNvb2tpZWphciBhcyBjb29raWVsaWINCmltcG9ydCByYW5kb20NCmltcG9ydCByZQ0KaW1wb3J0IHN0cmluZw0KaW1wb3J0IHN5cw0KaW1wb3J0IGdldG9wdA0KDQojIHRoaXMgaXMgYSB2YWxpZGF0aW9uIHByb2dyYW0gdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJsb2cgd29ya3MgY29ycmVjdGx5Lg0KIyBJZiB5b3UgYXJlIHJlYWRpbmcgdGhpcyBpbiBjbGVhciB0ZXh0LCB5b3UgYXJlIHByb2JhYmx5IHZpb2xhdGluZyB0aGUgaG9ub3IgY29kZQ0KDQojIGluaXQgdGhlIGdsb2JhbCBjb29raWUgamFyDQpjaiA9IGNvb2tpZWxpYi5Db29raWVKYXIoKQ0KIyBkZWNsYXJlIHRoZSB2YXJpYWJsZXMgdG8gY29ubmVjdCB0byBkYg0KY29ubmVjdGlvbiA9IE5vbmUNCmRiID0gTm9uZQ0Kd2ViaG9zdCA9ICJsb2NhbGhvc3Q6ODA4MiINCm1vbmdvc3RyID0gIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTciDQpkYl9uYW1lID0gImJsb2ciDQoNCiMgdGhpcyBzY3JpcHQgd2lsbCBjaGVjayB0aGF0IGhvbWV3b3JrIDMuMiBpcyBjb3JyZWN0DQoNCiMgbWFrZXMgYSBsaXR0bGUgc2FsdA0KZGVmIG1ha2Vfc2FsdChuKToNCiAgICBzYWx0ID0gIiINCiAgICBmb3IgaSBpbiByYW5nZShuKToNCiAgICAgICAgc2FsdCA9IHNhbHQgKyByYW5kb20uY2hvaWNlKHN0cmluZy5hc2NpaV9sZXR0ZXJzKQ0KICAgIHJldHVybiBzYWx0DQoNCg0KIyB0aGlzIGlzIGEgdmFsaWRhdGlvbiBwcm9ncmFtIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBibG9nIHdvcmtzIGNvcnJlY3RseS4NCg0KZGVmIGNyZWF0ZV91c2VyKHVzZXJuYW1lLCBwYXNzd29yZCk6DQogICAgDQogICAgZ2xvYmFsIGNqDQoNCiAgICB0cnk6DQogICAgICAgIHByaW50KCJUcnlpbmcgdG8gY3JlYXRlIGEgdGVzdCB1c2VyICIsIHVzZXJuYW1lKQ0KICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9zaWdudXAiLmZvcm1hdCh3ZWJob3N0KQ0KDQogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoImVtYWlsIiwiIiksKCJ1c2VybmFtZSIsdXNlcm5hbWUpLCAoInBhc3N3b3JkIixwYXNzd29yZCksICgidmVyaWZ5IixwYXNzd29yZCldKS5lbmNvZGUoJ3V0Zi04JykNCiAgICAgICAgcmVxdWVzdCA9IHVybGxpYi5yZXF1ZXN0LlJlcXVlc3QodXJsPXVybCwgZGF0YT1kYXRhKQ0KICAgICAgICBvcGVuZXIgPSB1cmxsaWIucmVxdWVzdC5idWlsZF9vcGVuZXIodXJsbGliLnJlcXVlc3QuSFRUUENvb2tpZVByb2Nlc3NvcihjaikpDQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQ0KDQogICAgICAgIHVzZXJzID0gZGIudXNlcnMNCiAgICAgICAgIyBjaGVjayB0aGF0IHRoZSB1c2VyIGlzIGluIHVzZXJzIGNvbGxlY3Rpb24NCiAgICAgICAgdXNlciA9IHVzZXJzLmZpbmRfb25lKHsnX2lkJzp1c2VybmFtZX0pDQogICAgICAgIGlmICh1c2VyID09IE5vbmUpOg0KICAgICAgICAgICAgcHJpbnQoIkNvdWxkIG5vdCBmaW5kIHRoZSB0ZXN0IHVzZXIgIiwgdXNlcm5hbWUsICJpbiB0aGUgdXNlcnMgY29sbGVjdGlvbi4iKQ0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgIHByaW50KCJGb3VuZCB0aGUgdGVzdCB1c2VyICIsIHVzZXJuYW1lLCAiIGluIHRoZSB1c2VycyBjb2xsZWN0aW9uIikNCg0KICAgICAgICAjIGNoZWNrIHRoYXQgdGhlIHVzZXIgaGFzIGJlZW4gYnVpbHQNCiAgICAgICAgcmVzdWx0ID0gZi5yZWFkKCkuZGVjb2RlKCd1dGYtOCcpDQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKCJXZWxjb21lXHMrIisgdXNlcm5hbWUpDQogICAgICAgIGlmIGV4cHIuc2VhcmNoKHJlc3VsdCk6DQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICANCiAgICAgICAgcHJpbnQoIldoZW4gd2UgdHJpZWQgdG8gY3JlYXRlIGEgdXNlciwgaGVyZSBpcyB0aGUgb3V0cHV0IHdlIGdvdFxuIikNCiAgICAgICAgcHJpbnQocmVzdWx0KQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgZXhjZXB0Og0KICAgICAgICBwcmludCgidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iKQ0KICAgICAgICByYWlzZQ0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KDQpkZWYgdHJ5X3RvX2xvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk6DQoNCiAgICB0cnk6DQogICAgICAgIHByaW50KCJUcnlpbmcgdG8gbG9naW4gZm9yIHRlc3QgdXNlciAiLCB1c2VybmFtZSkNCiAgICAgICAgdXJsID0gImh0dHA6Ly97MH0vbG9naW4iLmZvcm1hdCh3ZWJob3N0KQ0KDQogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoInVzZXJuYW1lIix1c2VybmFtZSksICgicGFzc3dvcmQiLHBhc3N3b3JkKV0pLmVuY29kZSgndXRmLTgnKQ0KICAgICAgICByZXF1ZXN0ID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCh1cmw9dXJsLCBkYXRhPWRhdGEpDQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcih1cmxsaWIucmVxdWVzdC5IVFRQQ29va2llUHJvY2Vzc29yKGNqKSkNCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpDQoNCiAgICAgICAgIyBjaGVjayBmb3Igc3VjY2Vzc2Z1bCBsb2dpbg0KICAgICAgICByZXN1bHQgPSBmLnJlYWQoKS5kZWNvZGUoJ3V0Zi04JykNCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUoIldlbGNvbWVccysiKyB1c2VybmFtZSkNCiAgICAgICAgaWYgZXhwci5zZWFyY2gocmVzdWx0KToNCiAgICAgICAgICAgIHJldHVybiBUcnVlDQoNCiAgICAgICAgcHJpbnQoIldoZW4gd2UgdHJpZWQgdG8gbG9naW4sIGhlcmUgaXMgdGhlIG91dHB1dCB3ZSBnb3RcbiIpDQogICAgICAgIHByaW50KHJlc3VsdCkNCiAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgZXhjZXB0Og0KICAgICAgICBwcmludCgidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iKQ0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KDQpkZWYgYWRkX2Jsb2dfcG9zdCh0aXRsZSxwb3N0LHRhZ3MpOg0KDQogICAgdHJ5Og0KICAgICAgICBwcmludCgiVHJ5aW5nIHRvIHN1Ym1pdCBhIHBvc3Qgd2l0aCB0aXRsZSAiLCB0aXRsZSkNCiAgICAgICAgZGF0YSA9IHVybGxpYi5wYXJzZS51cmxlbmNvZGUoWygiYm9keSIscG9zdCksICgic3ViamVjdCIsdGl0bGUpLCAoInRhZ3MiLHRhZ3MpXSkuZW5jb2RlKCd1dGYtOCcpDQogICAgICAgIHVybCA9ICJodHRwOi8vezB9L25ld3Bvc3QiLmZvcm1hdCh3ZWJob3N0KQ0KICAgICAgICByZXF1ZXN0ID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCh1cmw9dXJsLCBkYXRhPWRhdGEpDQogICAgICAgIGNqLmFkZF9jb29raWVfaGVhZGVyKHJlcXVlc3QpDQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcih1cmxsaWIucmVxdWVzdC5IVFRQQ29va2llUHJvY2Vzc29yKGNqKSkNCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpDQoNCiAgICAgICAgIyBjaGVjayBmb3Igc3VjY2Vzc2Z1bCBsb2dpbg0KICAgICAgICByZXN1bHQgPSBmLnJlYWQoKS5kZWNvZGUoJ3V0Zi04JykNCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUodGl0bGUgKyAiLisiICsgcG9zdCwgcmUuRE9UQUxMKQ0KDQogICAgICAgIGlmIGV4cHIuc2VhcmNoKHJlc3VsdCk6DQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KDQogICAgICAgIHByaW50KCJXaGVuIHdlIHRyaWVkIHRvIHBvc3QsIGhlcmUgaXMgdGhlIG91dHB1dCB3ZSBnb3RcbiIpDQogICAgICAgIHByaW50KHJlc3VsdCkNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBleGNlcHQ6DQogICAgICAgIHByaW50KCJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIpDQogICAgICAgIHJhaXNlDQoNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCmRlZiBhZGRfYmxvZ19jb21tZW50KHRpdGxlLHBvc3QpOg0KDQogICAgdHJ5Og0KICAgICAgICBwcmludCgiVHJ5aW5nIHRvIHN1Ym1pdCBhIGJsb2cgY29tbWVudCBmb3IgcG9zdCB3aXRoIHRpdGxlIiwgdGl0bGUpDQogICAgICAgIHVybCA9ICJodHRwOi8vezB9L25ld2NvbW1lbnQiLmZvcm1hdCh3ZWJob3N0KQ0KICAgICAgICANCiAgICAgICAgZG9jID0ge30NCiAgICAgICAgY2hlY2tfbW9uZ29fZm9yX3Bvc3QodGl0bGUsIHBvc3QsIGRvYykNCg0KICAgICAgICBwZXJtYWxpbmsgPSBkb2NbJ2RvYyddWydwZXJtYWxpbmsnXQ0KDQogICAgICAgIGNvbW1lbnRfbmFtZSA9IG1ha2Vfc2FsdCgxMikNCiAgICAgICAgY29tbWVudF9ib2R5ID0gbWFrZV9zYWx0KDEyKQ0KDQogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoImNvbW1lbnROYW1lIixjb21tZW50X25hbWUpLCAoImNvbW1lbnRCb2R5Iixjb21tZW50X2JvZHkpLCAoInBlcm1hbGluayIscGVybWFsaW5rKV0pLmVuY29kZSgndXRmLTgnKQ0KICAgICAgICByZXF1ZXN0ID0gdXJsbGliLnJlcXVlc3QuUmVxdWVzdCh1cmw9dXJsLCBkYXRhPWRhdGEpDQogICAgICAgIGNqLmFkZF9jb29raWVfaGVhZGVyKHJlcXVlc3QpDQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcigpDQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQ0KDQogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgYWRkaXRpb24gb2YgY29tbWVudCBvbiBwYWdlDQogICAgICAgIHJlc3VsdCA9IGYucmVhZCgpLmRlY29kZSgndXRmLTgnKQ0KICAgICAgICBleHByID0gcmUuY29tcGlsZSh0aXRsZSArICIuKyIgKyBwb3N0LCByZS5ET1RBTEwpDQoNCiAgICAgICAgaWYgbm90IGV4cHIuc2VhcmNoKHJlc3VsdCk6DQogICAgICAgICAgICBwcmludCgiV2hlbiB3ZSB0cmllZCB0byBmaW5kIHRoZSBjb21tZW50IHdlIHBvc3RlZCBhdCB0aGUgICIsIHVybCwgIiBoZXJlIGlzIHdoYXQgd2UgZ290IikNCiAgICAgICAgICAgIHByaW50KHJlc3VsdCkNCiAgICAgICAgICAgIHJldHVybiBGYWxzZQ0KDQoNCiAgICAgICAgIyBjaGVjayBmb3Igc3VjY2Vzc2Z1bCBhZGRpdGlvbiBvZiBjb21tZW50Li5yZXRyaWV2ZSB0aGUgZG9jIGFnYWluDQogICAgICAgIGlmKG5vdCBjaGVja19tb25nb19mb3JfcG9zdCh0aXRsZSwgcG9zdCwgZG9jKSk6DQogICAgICAgICAgICBwcmludCgiQ291bGQgbm90IGZpbmQgY29tbWVudCBpbiBkYXRhYmFzZSIpDQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICAgICAgDQogICAgICAgIGZvdW5kID0gRmFsc2UNCiAgICAgICAgaWYgKCdjb21tZW50cycgaW4gZG9jWydkb2MnXSk6DQogICAgICAgICAgICBmb3IgY29tbWVudCBpbiBkb2NbJ2RvYyddWydjb21tZW50cyddOg0KICAgICAgICAgICAgICAgIGlmIChjb21tZW50Wydib2R5J10gPT0gY29tbWVudF9ib2R5IGFuZCBjb21tZW50WydhdXRob3InXSA9PSBjb21tZW50X25hbWUpOg0KICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IFRydWUNCg0KICAgICAgICByZXR1cm4gZm91bmQNCg0KICAgIGV4Y2VwdDoNCiAgICAgICAgcHJpbnQoInRoZSByZXF1ZXN0IHRvICIsIHVybCwgIiBmYWlsZWQsIHNvIHlvdXIgYmxvZyBtYXkgbm90IGJlIHJ1bm5pbmcuIikNCiAgICAgICAgcmFpc2UNCg0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KDQojIGdyYWJzIHRoZSBibG9nIGluZGV4IGFuZCBjaGVja3MgdGhhdCB0aGUgcG9zdHMgYXBwZWFyIGluIHRoZSByaWdodCBvcmRlcg0KZGVmIGNoZWNrX2Jsb2dfaW5kZXgodGl0bGUxLCB0aXRsZTIpOg0KDQogICAgdHJ5Og0KICAgICAgICB1cmwgPSAiaHR0cDovL3swfS8iLmZvcm1hdCh3ZWJob3N0KQ0KICAgICAgICBwcmludCgiVHJ5aW5nIHRvIGdyYWIgdGhlIGJsb2cgaG9tZSBwYWdlIGF0IHVybCAiLCB1cmwpDQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwpDQogICAgICAgIGNqLmFkZF9jb29raWVfaGVhZGVyKHJlcXVlc3QpDQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcigpDQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQ0KDQogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgbG9naW4NCiAgICAgICAgcmVzdWx0ID0gZi5yZWFkKCkuZGVjb2RlKCd1dGYtOCcpDQogICAgICAgIGV4cHIgPSByZS5jb21waWxlKHRpdGxlMiArICIuKyIgKyB0aXRsZTIsIHJlLkRPVEFMTCkNCg0KICAgICAgICBpZiBleHByLnNlYXJjaChyZXN1bHQpOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCg0KICAgICAgICBwcmludCgiV2hlbiB3ZSB0cmllZCB0byByZWFkIHRoZSBibG9nIGluZGV4IGF0ICIsIHVybCwgIiBoZXJlIGlzIHdoYXQgd2UgZ290IikNCiAgICAgICAgcHJpbnQocmVzdWx0KQ0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KICAgIGV4Y2VwdDoNCiAgICAgICAgcHJpbnQoInRoZSByZXF1ZXN0IHRvICIsIHVybCwgIiBmYWlsZWQsIHNvIHlvdXIgYmxvZyBtYXkgbm90IGJlIHJ1bm5pbmcuIikNCiAgICAgICAgcmFpc2UNCg0KICAgICAgICByZXR1cm4gRmFsc2UNCg0KIyBjaGVjayB0aGF0IGEgcGFydGljdWxhciBibG9nIHBvc3QgaXMgaW4gdGhlIGNvbGxlY3Rpb24NCmRlZiBjaGVja19tb25nb19mb3JfcG9zdCh0aXRsZSwgYm9keSwgZG9jdW1lbnQpOg0KICAgIA0KICAgIHBvc3RzID0gZGIucG9zdHMNCiAgICB0cnk6DQogICAgICAgIHBvc3QgPSBwb3N0cy5maW5kX29uZSh7J3RpdGxlJzp0aXRsZSwgJ2JvZHknOmJvZHl9KQ0KICAgICAgICBpZiAocG9zdCBpcyBOb25lKToNCiAgICAgICAgICAgIHByaW50KCJDYW4ndCBmaW5kIHBvc3Qgd2l0aCB0aXRsZSAiLCB0aXRsZSwgIiBpbiBjb2xsZWN0aW9uIikNCiAgICAgICAgICAgIHJldHVybiBGYWxzZQ0KICAgICAgICBkb2N1bWVudFsnZG9jJ10gPSBwb3N0DQogICAgICAgIHJldHVybiBUcnVlDQogICAgZXhjZXB0Og0KICAgICAgICBwcmludCgiY2FuJyBxdWVyeSBNb25nb0RCLi5pcyBpdCBydW5uaW5nPyIpDQogICAgICAgIHJhaXNlDQoNCiAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiMgY29tbWFuZCBsaW5lIGFyZyBwYXJzaW5nIHRvIG1ha2UgZm9sa3MgaGFwcHkgd2hvIHdhbnQgdG8gcnVuIGF0IG1vbmdvbGFicyBvciBtb25nb2hxDQojIHRoaXMgZnVuY3Rpb25zIHVzZXMgZ2xvYmFsIHZhcnMgdG8gY29tbXVuaWNhdGUuIGZvcmdpdmUgbWUuDQpkZWYgYXJnX3BhcnNpbmcoYXJndik6DQoNCiAgICBnbG9iYWwgd2ViaG9zdA0KICAgIGdsb2JhbCBtb25nb3N0cg0KICAgIGdsb2JhbCBkYl9uYW1lDQoNCiAgICB0cnk6DQogICAgICAgIG9wdHMsIGFyZ3MgPSBnZXRvcHQuZ2V0b3B0KGFyZ3YsICItcDotbTotZDoiKQ0KICAgIGV4Y2VwdCBnZXRvcHQuR2V0b3B0RXJyb3I6DQogICAgICAgIHByaW50KCJ1c2FnZSB2YWxpZGF0ZS5weSAtcCB3ZWJob3N0IC1tIG1vbmdvQ29ubmVjdFN0cmluZyAtZCBkYXRhYmFzZU5hbWUiKQ0KICAgICAgICBwcmludCgiXHR3ZWJob3N0IGRlZmF1bHRzIHRvIHswfSIuZm9ybWF0KHdlYmhvc3QpKQ0KICAgICAgICBwcmludCgiXHRtb25nb0Nvbm5lY3Rpb25TdHJpbmcgZGVmYXVsdCB0byB7MH0iLmZvcm1hdChtb25nb3N0cikpDQogICAgICAgIHByaW50KCJcdGRhdGFiYXNlTmFtZSBkZWZhdWx0cyB0byB7MH0iLmZvcm1hdChkYl9uYW1lKSkNCiAgICAgICAgc3lzLmV4aXQoMikNCiAgICBmb3Igb3B0LCBhcmcgaW4gb3B0czoNCiAgICAgICAgaWYgKG9wdCA9PSAnLWgnKToNCiAgICAgICAgICAgIHByaW50KCJ1c2FnZSB2YWxpZGF0ZS5weSAtcCB3ZWJob3N0IC1tIG1vbmdvQ29ubmVjdFN0cmluZyAtZCBkYXRhYmFzZU5hbWUiKQ0KICAgICAgICAgICAgc3lzLmV4aXQoMikNCiAgICAgICAgZWxpZiBvcHQgaW4gKCItcCIpOg0KICAgICAgICAgICAgd2ViaG9zdCA9IGFyZw0KICAgICAgICAgICAgcHJpbnQoIk92ZXJyaWRpbmcgSFRUUCBob3N0IHRvIGJlICIsIHdlYmhvc3QpDQogICAgICAgIGVsaWYgb3B0IGluICgiLW0iKToNCiAgICAgICAgICAgIG1vbmdvc3RyID0gYXJnDQogICAgICAgICAgICBwcmludCgiT3ZlcnJpZGluZyBNb25nb0RCIGNvbm5lY3Rpb24gc3RyaW5nIHRvIGJlICIsIG1vbmdvc3RyKQ0KICAgICAgICBlbGlmIG9wdCBpbiAoIi1kIik6DQogICAgICAgICAgICBkYl9uYW1lID0gYXJnDQogICAgICAgICAgICBwcmludCgiT3ZlcnJpZGluZyBNb25nb0RCIGRhdGFiYXNlIHRvIGJlICIsIGRiX25hbWUpDQogICAgICAgICAgICANCg0KDQojIG1haW4gc2VjdGlvbiBvZiB0aGUgY29kZQ0KZGVmIG1haW4oYXJndik6DQogICAgICAgICAgICANCiAgICBhcmdfcGFyc2luZyhhcmd2KQ0KICAgIGdsb2JhbCBjb25uZWN0aW9uDQogICAgZ2xvYmFsIGRiDQoNCiAgICBwcmludCgiV2VsY29tZSB0byB0aGUgSFcgMy4yIGFuZCBIVyAzLjMgdmFsaWRhdGlvbiB0ZXN0ZXIiKQ0KDQogICAgIyBjb25uZWN0IHRvIHRoZSBkYiAobW9uZ29zdHIgd2FzIHNldCBpbiBhcmdfcGFyc2luZykNCiAgICBjb25uZWN0aW9uID0gcHltb25nby5Nb25nb0NsaWVudChtb25nb3N0cikNCiAgICBkYiA9IGNvbm5lY3Rpb25bZGJfbmFtZV0NCiAgICAgICAgDQogICAgdXNlcm5hbWUgPSBtYWtlX3NhbHQoNykNCiAgICBwYXNzd29yZCA9IG1ha2Vfc2FsdCg4KQ0KDQogICAgICMgdHJ5IHRvIGNyZWF0ZSB1c2VyDQoNCiAgICBpZiAoY3JlYXRlX3VzZXIodXNlcm5hbWUsIHBhc3N3b3JkKSk6DQogICAgICAgIHByaW50KCJVc2VyIGNyZWF0aW9uIHN1Y2Nlc3NmdWwuICIpDQogICAgICAgICAjIHRyeSB0byBsb2dpbg0KICAgICAgICBpZiAodHJ5X3RvX2xvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkpOg0KICAgICAgICAgICAgcHJpbnQoIlVzZXIgbG9naW4gc3VjY2Vzc2Z1bC4iKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcHJpbnQoIlVzZXIgbG9naW4gZmFpbGVkIikNCiAgICAgICAgICAgIHByaW50KCJPZGQsIHRoaXMgd2Vla3MncyBjb2RlIHNob3VsZCBkbyB0aGF0IGFzIGdpdmVuIikNCiAgICAgICAgICAgIHN5cy5leGl0KDEpDQoNCiAgICBlbHNlOg0KICAgICAgICBwcmludCgiU29ycnksIHlvdSBoYXZlIG5vdCBzb2x2ZWQgaXQgeWV0LiIpDQogICAgICAgIHN5cy5leGl0KDEpDQoNCg0KICAgICMgdHJ5IHRvIGNyZWF0ZSBhIGJsb2cgcG9zdA0KICAgIHBvc3QxID0gbWFrZV9zYWx0KDMwKQ0KICAgIHRpdGxlMSA9IG1ha2Vfc2FsdCgzMCkNCiAgICB0YWdzMSA9IG1ha2Vfc2FsdCg1KSArICIsICIgKyBtYWtlX3NhbHQoNSkgKyAiLCAiICsgbWFrZV9zYWx0KDUpDQoNCg0KICAgIGlmIChhZGRfYmxvZ19wb3N0KHRpdGxlMSwgcG9zdDEsdGFnczEpKToNCiAgICAgICAgcHJpbnQoIlN1Ym1pc3Npb24gb2Ygc2luZ2xlIHBvc3Qgc3VjY2Vzc2Z1bCIpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQoIlVuYWJsZSB0byBjcmVhdGUgYSBwb3N0IikNCiAgICAgICAgc3lzLmV4aXQoMSkNCg0KDQogICAgIyB0cnkgdG8gY3JlYXRlIGEgc2Vjb25kIGJsb2cgcG9zdA0KICAgIHBvc3QyID0gbWFrZV9zYWx0KDMwKQ0KICAgIHRpdGxlMiA9IG1ha2Vfc2FsdCgzMCkNCiAgICB0YWdzMiA9IG1ha2Vfc2FsdCg1KSArICIsICIgKyBtYWtlX3NhbHQoNSkgKyAiLCAiICsgbWFrZV9zYWx0KDUpDQoNCiAgICBpZiAoYWRkX2Jsb2dfcG9zdCh0aXRsZTIsIHBvc3QyLHRhZ3MyKSk6DQogICAgICAgIHByaW50KCJTdWJtaXNzaW9uIG9mIHNlY29uZCBwb3N0IHN1Y2Nlc3NmdWwiKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50KCJVbmFibGUgdG8gY3JlYXRlIHNlY29uZCBwb3N0IikNCiAgICAgICAgc3lzLmV4aXQoMSkNCg0KICAgICMgbm93IGxldCdzIG1ha2Ugc3VyZSB0aGF0IGJvdGggcG9zdHMgYXBwZWFyIG9uIHRoZSBob21lIHBhZ2Ugb2YgdGhlIGJsb2csIGluIHRoZSBjb3JyZWN0IG9yZGVyDQoNCiAgICBpZiAoY2hlY2tfYmxvZ19pbmRleCh0aXRsZTEsIHRpdGxlMikpOg0KICAgICAgICBwcmludCgiQmxvY2sgaW5kZXggbG9va3MgZ29vZC4iKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50KCJCbG9nIGluZGV4IGRvZXMgbm90IGhhdmUgdGhlIHBvc3RzIHByZXNlbnQsIG9yZGVyZWQgY29ycmVjdGx5IikNCiAgICAgICAgc3lzLmV4aXQoMSkNCg0KDQogICAgIyBjaGVjayBmb3IgREIgZGF0YSBpbnRlZ3JpdHkNCiAgICBpZiAobm90IGNoZWNrX21vbmdvX2Zvcl9wb3N0KHRpdGxlMSwgcG9zdDEsIHt9KSk6DQogICAgICAgIHByaW50KCJDYW4ndCBmaW5kIGJsb2cgcG9zdCBpbiBibG9nIGRiLCBwb3N0cyBjb2xsZWN0aW9uIHdpdGggdGl0bGUgIiwgdGl0bGUpDQogICAgICAgIHN5cy5leGl0KDEpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQoIkZvdW5kIGJsb2cgcG9zdCBpbiBwb3N0cyBjb2xsZWN0aW9uIikNCg0KDQogICAgcHJpbnQoIlRlc3RzIFBhc3NlZCBmb3IgSFcgMy4yLiBZb3VyIEhXIDMuMiB2YWxpZGF0aW9uIGNvZGUgaXMgODlqa2xmc2pybGsyMDlqZmtzMmoyZWsiKQ0KDQogICAgIyBub3cgY2hlY2sgdGhhdCB5b3UgY2FuIHBvc3QgYSBjb21tZW50DQogICAgaWYgKG5vdCBhZGRfYmxvZ19jb21tZW50KHRpdGxlMSxwb3N0MSkpOg0KICAgICAgICBwcmludCgiQ2FuJ3QgYWRkIGJsb2cgY29tbWVudHMgKHNvIEhXIDMuMyBub3QgeWV0IGNvbXBsZXRlKSIpDQogICAgICAgIHN5cy5leGl0KDEpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSBhZGRlZCBibG9nIGNvbW1lbnRzIikNCg0KDQogICAgcHJpbnQoIlRlc3RzIFBhc3NlZCBmb3IgSFcgMy4zLiBZb3VyIEhXIDMuMyB2YWxpZGF0aW9uIGNvZGUgaXMgamsxMzEwdm4ybGt2MGoya2YwamtmcyIpDQogICAgDQoNCg0KDQppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOg0KICAgIG1haW4oc3lzLmFyZ3ZbMTpdKQ0KDQoNCg0KDQoNCg0KDQo="
eval(compile(base64.b64decode(code), "<string>", 'exec'))
